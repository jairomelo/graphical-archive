import{a as Qt,s as H,r as D}from"../chunks/KB-UQfb-.js";import{f as k,e as N,a as w,s as l}from"../chunks/BV1p_s1l.js";import{i as Wa}from"../chunks/Bygz-Mgo.js";import{h as Kt,p as Pa,af as Ha,ag as R,ah as Da,c as s,t as T,P as e,a as Ga,s as n,K as i,$ as g,Z as h,r as a,ai as we,aj as ke,Q as f,f as Xa,a7 as Se}from"../chunks/U0a9CGH1.js";import{i as E}from"../chunks/D_GnYe44.js";import{t as Ba,e as nt,b as G,s as $e,i as Jt,a as Oa,c as it,u as oe,f as je,d as qa,g as Ua,h as Y,N as Va}from"../chunks/DCmnotGi.js";import{p as Ya,s as Za,a as Z,b as Qa}from"../chunks/Do34IwOG.js";function Ka(S,A,I,X){var $=S.__style;if(Kt||$!==A){var L=Ba(A);(!Kt||L!==S.getAttribute("style"))&&(L==null?S.removeAttribute("style"):S.style.cssText=L),S.__style=A}return X}function Ja(S){return function(...A){var I=A[0];return I.stopPropagation(),S?.apply(this,A)}}const es=!1,ts=!0;async function as({fetch:S}){const[A,I]=await Promise.all([S(Qt("/data/europeana_metadata.json")),S(Qt("/data/europeana_neighbors.json"))]);return{metadata:await A.json(),neighbors:await I.json()}}const ks=Object.freeze(Object.defineProperty({__proto__:null,load:as,prerender:ts,ssr:es},Symbol.toStringTag,{value:"Module"}));var ss=k("<option> </option>"),rs=k('<span class="text-xs px-2 py-0.5 bg-green-100 text-green-700 rounded-full" title="Already viewed">✓</span>'),ns=k('<li class="p-0"><button type="button"><div class="flex items-center gap-2"><div class="flex-1"><div class="text-sm font-medium"> </div> <div class="text-xs text-gray-500"> </div></div> <!></div></button></li>'),is=k('<img class="w-full h-auto rounded mb-2"/>'),os=k('<div class="text-xs"> </div>'),ls=k('<div class="text-xs"> </div>'),ds=k('<a target="_blank" class="text-blue-600 text-sm hover:underline">View on Europeana</a>'),cs=k('<span class="text-purple-600 ml-1" title="User interaction boost">↑</span>'),us=k('<li class="py-2"><div class="flex items-start justify-between gap-2"><button class="text-left text-sm hover:underline"> </button> <span class="text-xs text-gray-600 whitespace-nowrap"> <!></span></div> <div class="mt-1"><div class="flex items-center gap-2 text-[11px] text-gray-600 flex-wrap"><span class="inline-flex items-center gap-1"><span class="inline-block w-2 h-2 bg-indigo-500 rounded"></span> </span> <span class="inline-flex items-center gap-1"><span class="inline-block w-2 h-2 bg-emerald-500 rounded"></span> </span> <span class="inline-flex items-center gap-1"><span class="inline-block w-2 h-2 bg-amber-500 rounded"></span> </span> <span><span class="inline-block w-2 h-2 bg-purple-500 rounded"></span> </span></div></div></li>'),vs=k('<div class="mt-4 border-t pt-3"><div class="flex items-center justify-between mb-2"><h4 class="font-semibold">Top neighbors</h4> <span class="text-[10px] text-gray-500">G<sub>ij</sub> <sub>text</sub> <sub>date</sub> <sub>place</sub> <sub>user</sub></span></div> <ul class="divide-y"></ul></div>'),ps=k('<!> <div class="space-y-1"><div class="font-medium"> </div> <div class="text-xs text-gray-600"> </div> <!> <!> <!> <button> </button> <div class="text-[11px] text-gray-500 mt-1"> </div></div> <!>',1),gs=k('<p class="text-sm text-gray-600">Hover a node to preview it; click a node to keep it here until you hover another.</p>'),ms=k(`<div class="p-4 space-y-4"><div class="flex justify-between items-center"><h2 class="text-sm text-gray-600">A Conceptual Visualization of the Graphical Topology of the Archive</h2></div> <div class="border-t pt-4"><p class="text-md text-gray-600 mb-3">This visualization sketches what we are calling the "graphical topology" of the archive: 
    a space where items relate to one another through textual metadata, dates, places, and 
    patterns of interaction. It is not a working archival platform but a conceptual model 
    meant to explore how archives might be navigated through relational proximity rather 
    than fixed hierarchies or linear search.</p></div> <div class="border rounded-lg bg-white p-4 space-y-3"><details class="border rounded-lg bg-gray-50" open><summary class="cursor-pointer p-4 select-none font-semibold text-gray-700 text-sm hover:bg-gray-100 rounded-lg"><span class="inline-flex items-center justify-between w-full"><span>Network Size</span> <span class="font-mono font-semibold text-gray-600"> </span></span></summary> <div class="px-4 pb-4 space-y-2"><div class="flex items-center gap-3"><span class="text-xs text-gray-600">10</span> <input type="range" min="10" step="10" class="flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500"/> <span class="text-xs text-gray-600"> </span></div> <p class="text-[10px] text-gray-500">Control the number of nodes from filtered results. Adjust search/filters above to change available items.</p></div></details> <details class="border rounded-lg bg-gray-50" open><summary class="cursor-pointer p-4 select-none hover:bg-gray-100 rounded-lg"><div class="flex items-center justify-between"><h3 class="text-sm font-semibold text-gray-700">Similarity Weights</h3> <button class="px-3 py-1 text-xs rounded border bg-white hover:bg-gray-100 text-gray-700" title="Reset weights to default values">Reset Weights</button></div></summary> <div class="px-4 pb-4"><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"><div class="space-y-1"><label class="flex items-center justify-between text-xs text-gray-600"><span class="inline-flex items-center gap-1"><span class="inline-block w-2 h-2 bg-indigo-500 rounded"></span> Text</span> <span class="font-mono font-semibold"> </span></label> <input type="range" min="0" max="1" step="0.05" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-indigo-500"/></div> <div class="space-y-1"><label class="flex items-center justify-between text-xs text-gray-600"><span class="inline-flex items-center gap-1"><span class="inline-block w-2 h-2 bg-emerald-500 rounded"></span> Date</span> <span class="font-mono font-semibold"> </span></label> <input type="range" min="0" max="1" step="0.05" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-emerald-500"/></div> <div class="space-y-1"><label class="flex items-center justify-between text-xs text-gray-600"><span class="inline-flex items-center gap-1"><span class="inline-block w-2 h-2 bg-amber-500 rounded"></span> Place</span> <span class="font-mono font-semibold"> </span></label> <input type="range" min="0" max="1" step="0.05" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-amber-500"/></div> <div class="space-y-1"><label class="flex items-center justify-between text-xs text-gray-600"><span class="inline-flex items-center gap-1"><span class="inline-block w-2 h-2 bg-purple-500 rounded"></span> User</span> <span class="font-mono font-semibold"> </span></label> <input type="range" min="0" max="1" step="0.05" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-purple-500"/></div></div> <p class="text-[10px] text-gray-500 mt-2">Adjust weights to control how similarity scores are calculated. Weights are automatically normalized: G<sub>ij</sub> = α·S<sub>text</sub>(i,j) + β·S<sub>date</sub>(i,j) + γ·S<sub>place</sub>(i,j) + δ·S<sub>user</sub>(i,j) where α+β+γ+δ=1.0</p></div></details> <details class="border rounded p-3 space-y-2 bg-white"><summary class="font-semibold text-sm cursor-pointer">Neighbor Display Count</summary> <div class="space-y-2 pt-2"><div class="space-y-1"><label class="flex items-center justify-between text-xs text-gray-600"><span>Top neighbors to show</span> <span class="font-mono font-semibold"> </span></label> <input type="range" min="10" max="50" step="5" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500"/></div> <p class="text-[10px] text-gray-500">Control how many top neighbors are displayed when hovering over an item in the network graph.</p></div></details> <div class="flex gap-4 items-center flex-wrap"><button class="px-3 py-1 bg-gray-600 text-white rounded text-sm">Reset Zoom</button> <button class="ml-auto px-3 py-1 rounded text-sm border bg-gray-100 hover:bg-gray-200" aria-controls="preview-panel"> </button> <button class="px-3 py-1 rounded text-sm border bg-red-50 hover:bg-red-100 text-red-700" title="Reset interaction history">Reset Interactions</button></div> <div class="flex flex-col lg:flex-row gap-4 items-start"><div class="flex-1 min-w-0 space-y-4"><!> <div class="border rounded-lg bg-white p-4"><h3 class="text-lg font-bold text-gray-800 mb-3">Search & Filter</h3> <div class="space-y-3"><div class="flex gap-3 flex-wrap items-center"><input type="search" class="border rounded px-3 py-2 flex-1 min-w-[200px]" placeholder="Search title…"/> <select class="border rounded px-3 py-2"><option>All languages</option><!></select> <input class="border rounded px-3 py-2 w-32" type="number" placeholder="Year ≥"/> <input class="border rounded px-3 py-2 w-32" type="number" placeholder="Year ≤"/></div> <div class="text-sm text-gray-600"> </div> <ul class="border rounded divide-y max-h-[50vh] overflow-auto bg-gray-50"></ul></div></div></div>  <div role="separator" aria-orientation="vertical" class="hidden lg:block w-1 cursor-col-resize self-stretch bg-gray-300 hover:bg-gray-400 transition-colors" title="Drag to resize details panel"></div> <aside id="preview-panel"><h3 class="font-semibold mb-2">Details</h3> <!></aside></div></div></div>`);function Ss(S,A){Pa(A,!1);const I=()=>Z(Y,"$selectedId",B),X=()=>Z(Jt,"$items",B),$=()=>Z(je,"$filters",B),L=()=>Z(Ua,"$userSimilarity",B),Q=()=>Z(qa,"$byId",B),j=()=>Z(oe,"$userInteractions",B),[B,ea]=Za(),m=h(),le=h(),_=h(),de=h(),Ne=h(),W=h();let O=Ya(A,"data",8),K=h(),F=h(!0),J=h(null),ce=h([]),o=h({text:.5,date:.2,place:.2,user:.1}),ee=h(10),C=h(500),M=null,q=h(360);const ot=260,lt=640;let Ae=!1,dt=0,ct=0;function ta(t){return Array.isArray(t)?t:Array.isArray(t?.pairs)?t.pairs.map(r=>({source:r.a,target:r.b,score:r.score})):t?.graph?.edges??[]}Ha(()=>{if(Jt.set(O().metadata||[]),Oa.set(ta(O().neighbors)),g(C,O().metadata?.length||500),typeof window<"u"){g(F,window.innerWidth>=1024);const t=Number(localStorage.getItem("ga_panel_width"));!Number.isNaN(t)&&t>=ot&&t<=lt&&g(q,t)}});let ue=h("");function aa(t){t===""?Y.set(null):(M&&(clearTimeout(M),M=null),Y.set(t),oe.trackView(t))}function sa(t){if(M&&(clearTimeout(M),M=null),g(J,t),t){const r=t;M=setTimeout(()=>{e(J)===r&&(oe.trackHover(r),Y.set(r)),M=null},3e3)}}function ut(t){e(F)&&(Ae=!0,dt="touches"in t?t.touches[0].clientX:t.clientX,ct=e(q),window.addEventListener("mousemove",ve),window.addEventListener("touchmove",ve,{passive:!1}),window.addEventListener("mouseup",pe),window.addEventListener("touchend",pe),document.body.style.cursor="col-resize",document.body.style.userSelect="none")}function ve(t){if(!Ae)return;if("preventDefault"in t)try{t.preventDefault()}catch{}const r="touches"in t?t.touches[0].clientX:t.clientX,d=dt-r,b=Math.max(ot,Math.min(lt,ct+d));g(q,b)}function pe(){Ae=!1,window.removeEventListener("mousemove",ve),window.removeEventListener("touchmove",ve),window.removeEventListener("mouseup",pe),window.removeEventListener("touchend",pe),document.body.style.cursor="",document.body.style.userSelect=""}function ra(t,r=10){if(!t)return[];const d=O()?.neighbors;return(Array.isArray(d)?[]:d?.[t]??[]).map(c=>{const x=L().get([t,c.id].sort().join("|"))??0,y=e(o).text*(c.S_text??0)+e(o).date*(c.S_date??0)+e(o).place*(c.S_place??0)+e(o).user*x;return{...c,item:Q().get(c.id),adjustedScore:y}}).sort((c,x)=>x.adjustedScore-c.adjustedScore).slice(0,r)}R(()=>(e(J),I()),()=>{g(m,e(J)??I()??null)}),R(()=>e(q),()=>{try{localStorage.setItem("ga_panel_width",String(e(q)))}catch{}}),R(()=>e(ue),()=>{g(le,e(ue).toLowerCase())}),R(()=>(X(),e(le),$()),()=>{g(_,X().filter(t=>{const r=(Array.isArray(t.title)?t.title[0]:t.title)??"",d=!e(le)||String(r).toLowerCase().includes(e(le)),b=t.language&&t.language[0]||"",c=!$().lang||b===$().lang,x=Number(t.year),y=(!$().yearFrom||x>=$().yearFrom)&&(!$().yearTo||x<=$().yearTo||Number.isNaN(x));return d&&c&&y}))}),R(()=>(e(_),e(C)),()=>{g(de,e(_).slice(0,e(C)))}),R(()=>e(de),()=>{g(Ne,new Set(e(de).map(t=>t.id)))}),R(()=>(e(_),e(Ne)),()=>{g(W,e(_).filter(t=>e(Ne).has(t.id)))}),R(()=>(e(m),e(ee)),()=>{g(ce,ra(e(m),e(ee)))}),Da(),Wa();var Ie=ms(),vt=n(s(Ie),4),Fe=s(vt),Te=s(Fe),pt=s(Te),gt=n(s(pt),2),na=s(gt);a(gt),a(pt),a(Te);var mt=n(Te,2),bt=s(mt),ge=n(s(bt),2);D(ge);var xt=n(ge,2),ia=s(xt,!0);a(xt),a(bt),we(2),a(mt),a(Fe);var ze=n(Fe,2),Ee=s(ze),ht=s(Ee),oa=n(s(ht),2);a(ht),a(Ee);var ft=n(Ee,2),_t=s(ft),Le=s(_t),Ce=s(Le),yt=n(s(Ce),2),la=s(yt,!0);a(yt),a(Ce);var wt=n(Ce,2);D(wt),a(Le);var Me=n(Le,2),Re=s(Me),kt=n(s(Re),2),da=s(kt,!0);a(kt),a(Re);var St=n(Re,2);D(St),a(Me);var We=n(Me,2),Pe=s(We),$t=n(s(Pe),2),ca=s($t,!0);a($t),a(Pe);var jt=n(Pe,2);D(jt),a(We);var Nt=n(We,2),He=s(Nt),At=n(s(He),2),ua=s(At,!0);a(At),a(He);var It=n(He,2);D(It),a(Nt),a(_t),we(2),a(ft),a(ze);var De=n(ze,2),Ft=n(s(De),2),Tt=s(Ft),Ge=s(Tt),zt=n(s(Ge),2),va=s(zt,!0);a(zt),a(Ge);var Et=n(Ge,2);D(Et),a(Tt),we(2),a(Ft),a(De);var Xe=n(De,2),Lt=s(Xe),te=n(Lt,2),pa=s(te,!0);a(te);var ga=n(te,2);a(Xe);var Ct=n(Xe,2),Be=s(Ct),Mt=s(Be);{var ma=t=>{Qa(Va(t,{get items(){return e(de)},get neighbors(){return f(O()),i(()=>O().neighbors)},get userSimilarity(){return L()},get viewedItems(){return j(),i(()=>j().views)},get textWeight(){return e(o),i(()=>e(o).text)},get dateWeight(){return e(o),i(()=>e(o).date)},get placeWeight(){return e(o),i(()=>e(o).place)},get userWeight(){return e(o),i(()=>e(o).user)},get maxNodes(){return e(C)},get selectedId(){return I()},onNodeClick:aa,onNodeHover:sa,$$legacy:!0}),r=>g(K,r),()=>e(K))};E(Mt,t=>{t(ma)})}var Rt=n(Mt,2),Wt=n(s(Rt),2),Oe=s(Wt),qe=s(Oe);D(qe);var me=n(qe,2),Ue=s(me);Ue.value=Ue.__value="";var ba=n(Ue);nt(ba,1,()=>(X(),i(()=>Array.from(new Set(X().flatMap(t=>t.language||[]))))),it,(t,r)=>{var d=ss(),b=s(d,!0);a(d);var c={};T(()=>{l(b,e(r)),c!==(c=e(r))&&(d.value=(d.__value=e(r))??"")}),w(t,d)}),a(me);var Pt=n(me,2),xa=n(Pt,2);a(Oe);var Ve=n(Oe,2),ha=s(Ve);a(Ve);var Ht=n(Ve,2);nt(Ht,5,()=>(e(W),i(()=>e(W).slice(0,200))),it,(t,r)=>{var d=ns(),b=s(d),c=s(b),x=s(c),y=s(x),se=s(y,!0);a(y);var xe=n(y,2),re=s(xe);a(xe),a(x);var Ye=n(x,2);{var he=P=>{var U=rs();w(P,U)};E(Ye,P=>{j(),e(r),i(()=>j().views.has(e(r).id))&&P(he)})}a(c),a(b),a(d),T((P,U,Ze)=>{$e(b,1,`w-full text-left p-3 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 ${I(),e(r),i(()=>I()===e(r).id?"bg-blue-50":"")??""} ${P??""}`),l(se,U),l(re,`${e(r),i(()=>e(r).year)??""} · ${Ze??""}`)},[()=>(j(),e(r),i(()=>j().views.has(e(r).id)?"bg-green-50":"")),()=>(e(r),i(()=>Array.isArray(e(r).title)?e(r).title[0]:e(r).title)),()=>(e(r),i(()=>e(r).language&&e(r).language.join(", ")||""))]),N("click",b,()=>{Y.set(e(r).id),e(K)&&e(K).centerOnNode?.(e(r).id)}),w(t,d)}),a(Ht),a(Wt),a(Rt),a(Be);var be=n(Be,2),ae=n(be,2),fa=n(s(ae),2);{var _a=t=>{const r=Se(()=>(Q(),e(m),i(()=>Q().get(e(m))))),d=Se(()=>(f(e(r)),i(()=>Array.isArray(e(r).title)?e(r).title[0]:e(r).title)));var b=ps(),c=Xa(b);{var x=u=>{var v=is();T(()=>{H(v,"src",(f(e(r)),i(()=>e(r).thumbnail))),H(v,"alt",e(d)||"thumbnail")}),w(u,v)};E(c,u=>{f(e(r)),i(()=>e(r).thumbnail)&&u(x)})}var y=n(c,2),se=s(y),xe=s(se,!0);a(se);var re=n(se,2),Ye=s(re);a(re);var he=n(re,2);{var P=u=>{var v=os(),z=s(v);a(v),T(()=>l(z,`Country: ${f(e(r)),i(()=>e(r).country)??""}`)),w(u,v)};E(he,u=>{f(e(r)),i(()=>e(r).country)&&u(P)})}var U=n(he,2);{var Ze=u=>{var v=ls(),z=s(v);a(v),T(()=>l(z,`Collection: ${f(e(r)),i(()=>e(r).collection)??""}`)),w(u,v)};E(U,u=>{f(e(r)),i(()=>e(r).collection)&&u(Ze)})}var Dt=n(U,2);{var wa=u=>{var v=ds();T(()=>H(v,"href",(f(e(r)),i(()=>e(r).link)))),w(u,v)};E(Dt,u=>{f(e(r)),i(()=>e(r).link)&&u(wa)})}var ne=n(Dt,2),ka=s(ne,!0);a(ne);var Gt=n(ne,2),Sa=s(Gt);a(Gt),a(y);var $a=n(y,2);{var ja=u=>{var v=vs(),z=s(v),fe=n(s(z),2),Xt=n(s(fe),2),Bt=n(Xt,2),Ot=n(Bt,2),Na=n(Ot,2);we(),a(fe),a(z);var qt=n(z,2);nt(qt,5,()=>e(ce),it,(Qe,p)=>{const _e=Se(()=>(e(p),i(()=>Array.isArray(e(p).item?.title)?e(p).item?.title[0]:e(p).item?.title))),V=Se(()=>(L(),e(m),e(p),i(()=>L().get([e(m),e(p).id].sort().join("|"))??0)));var Ke=us(),Je=s(Ke),ye=s(Je),Aa=s(ye,!0);a(ye);var Ut=n(ye,2),Vt=s(Ut),Ia=n(Vt);{var Fa=ie=>{var rt=cs();w(ie,rt)};E(Ia,ie=>{e(V)>0&&ie(Fa)})}a(Ut),a(Je);var Yt=n(Je,2),Zt=s(Yt),et=s(Zt),Ta=n(s(et));a(et);var tt=n(et,2),za=n(s(tt));a(tt);var at=n(tt,2),Ea=n(s(at));a(at);var st=n(at,2),La=n(s(st));a(st),a(Zt),a(Yt),a(Ke),T((ie,rt,Ca,Ma,Ra)=>{l(Aa,(f(e(_e)),e(p),i(()=>e(_e)??e(p).title??e(p).id))),l(Vt,`${ie??""} `),l(Ta,`Text ${rt??""}`),l(za,`Date ${Ca??""}`),l(Ea,`Place ${Ma??""}`),$e(st,1,`inline-flex items-center gap-1 ${e(V)>0?"text-purple-600 font-medium":""}`),l(La,`User ${Ra??""}`)},[()=>(e(p),i(()=>e(p).adjustedScore.toFixed(2))),()=>(e(o),e(p),i(()=>(e(o).text*(e(p).S_text??0)).toFixed(2))),()=>(e(o),e(p),i(()=>(e(o).date*(e(p).S_date??0)).toFixed(2))),()=>(e(o),e(p),i(()=>(e(o).place*(e(p).S_place??0)).toFixed(2))),()=>(e(o),f(e(V)),i(()=>(e(o).user*e(V)).toFixed(2)))]),N("click",ye,()=>{Y.set(e(p).id),g(J,null)}),w(Qe,Ke)}),a(qt),a(v),T((Qe,p,_e,V)=>{l(Xt,` = ${Qe??""}·S`),l(Bt,` + ${p??""}·S`),l(Ot,` + ${_e??""}·S`),l(Na,` + ${V??""}·S`)},[()=>(e(o),i(()=>e(o).text.toFixed(2))),()=>(e(o),i(()=>e(o).date.toFixed(2))),()=>(e(o),i(()=>e(o).place.toFixed(2))),()=>(e(o),i(()=>e(o).user.toFixed(2)))]),w(u,v)};E($a,u=>{e(ce),i(()=>e(ce).length)&&u(ja)})}T((u,v,z,fe)=>{l(xe,e(d)??"(no title)"),l(Ye,`${f(e(r)),i(()=>e(r).year??"")??""} · ${u??""}`),$e(ne,1,`mt-2 px-2 py-1 text-xs rounded ${v??""}`),l(ka,z),l(Sa,`Hover views: ${fe??""}`)},[()=>(f(e(r)),i(()=>e(r).language&&e(r).language.join(", ")||"")),()=>(j(),e(m),i(()=>j().bookmarks.has(e(m))?"bg-yellow-100 text-yellow-800 border border-yellow-300":"bg-gray-100 text-gray-700 border border-gray-300")),()=>(j(),e(m),i(()=>j().bookmarks.has(e(m))?"★ Bookmarked":"☆ Bookmark")),()=>(j(),e(m),i(()=>j().hoverTimestamps?.get(e(m))?.length||0))]),N("click",ne,()=>oe.toggleBookmark(e(m))),w(t,b)},ya=t=>{var r=gs();w(t,r)};E(fa,t=>{e(m),Q(),i(()=>e(m)&&Q().get(e(m)))?t(_a):t(ya,!1)})}a(ae),a(Ct),a(vt),a(Ie),T((t,r,d,b,c,x,y)=>{l(na,`${t??""} / ${e(_),i(()=>e(_).length)??""} nodes`),H(ge,"max",r),l(ia,(e(_),i(()=>e(_).length))),l(la,d),l(da,b),l(ca,c),l(ua,x),l(va,e(ee)),H(te,"aria-expanded",e(F)),l(pa,e(F)?"Hide panel":"Show panel"),l(ha,`Showing ${y??""} of ${e(W),i(()=>e(W).length)??""} items`),H(be,"aria-hidden",!e(F)),$e(ae,1,`border rounded-lg p-3 bg-gray-50 max-h-[140vh] overflow-auto w-full lg:w-auto flex-shrink-0 ${e(F)?"block":"hidden"}`),H(ae,"aria-hidden",!e(F)),Ka(ae,`width: ${e(F)?e(q)+"px":"auto"}`)},[()=>(e(C),e(_),i(()=>Math.min(e(C),e(_).length))),()=>(e(_),i(()=>Math.max(10,e(_).length))),()=>(e(o),i(()=>e(o).text.toFixed(2))),()=>(e(o),i(()=>e(o).date.toFixed(2))),()=>(e(o),i(()=>e(o).place.toFixed(2))),()=>(e(o),i(()=>e(o).user.toFixed(2))),()=>(e(W),i(()=>Math.min(e(W).length,200)))]),G(ge,()=>e(C),t=>g(C,t)),N("click",oa,Ja(()=>{g(o,{text:.5,date:.2,place:.2,user:.1})})),G(wt,()=>e(o).text,t=>ke(o,e(o).text=t)),G(St,()=>e(o).date,t=>ke(o,e(o).date=t)),G(jt,()=>e(o).place,t=>ke(o,e(o).place=t)),G(It,()=>e(o).user,t=>ke(o,e(o).user=t)),G(Et,()=>e(ee),t=>g(ee,t)),N("click",Lt,()=>e(K)?.resetZoom()),N("click",te,()=>g(F,!e(F))),N("click",ga,()=>{confirm("Clear all tracked views and bookmarks?")&&oe.reset()}),G(qe,()=>e(ue),t=>g(ue,t)),N("change",me,t=>je.set({...$(),lang:t.target.value||void 0})),N("change",Pt,t=>je.set({...$(),yearFrom:Number(t.target.value)||void 0})),N("change",xa,t=>je.set({...$(),yearTo:Number(t.target.value)||void 0})),N("mousedown",be,ut),N("touchstart",be,ut),w(S,Ie),Ga(),ea()}export{Ss as component,ks as universal};
